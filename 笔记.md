# 概述

在使用 git 前，要先明白几个概念：**工作空间**、**缓存区**、**本地仓库**和**远程仓库**。

其中 **远程仓库** 就是最终 github 端存储的仓库，在 github 网页端可以查看和下载里面的所有内容。

而 **本地仓库** 是抽象的，它不如远程仓库那样轻易的查看的里面有什么，但可以在本地灵活的修改其中内容（例如，在本地可以轻易的添加一整个文件夹的内容，而在网页端无法做到）。

**工作空间** 就是一个本地的文件夹，本地仓库就存在于该文件夹下的 .git 文件夹（隐藏的）中，在工作空间路径下的终端中，使用 `git add` 等指令，改动的内容会暂存在 **暂存区** 。

确定好改动后，使用 `git commit` 指令将暂存区的内容提交至本地仓库。

最后，使用 `git push` 将本地仓库提交至远程仓库中。







# 安装 git

搜索 git 官网下载 git for windows 进行安装即可。







# 设置全局的 git 用户信息

在使用 git 前，还要先设置一下全局的 git 用户信息。命令如下：（github 上的昵称或邮箱）（选择一个就可以了，推荐邮箱）

```shell
git config --global user.name "MuAnnan"
git config --global user.email "aikn0806@gmail.com"
```

该命令会将用户名或邮箱写入 .gitconfig 文件中，该文件位于（Linux/macOS: `~\.gitconfig`  Windows: `C:\Users\<YourUsername>\.gitconfig`）。



如果不设置的话，在 commit 时会遇到如下报错：

```shell
*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect email address (got 'yourusername@yourhostname')
```







# 配置 SSH 密钥

想要无痛向 github 远程仓库上传和拉取仓库，而不需要过多的身份验证，配置 SSH 密钥是一个不错的方式。

步骤如下：

1. 使用以下命令创建 SSH 私钥：

   ```shell
   ssh-keygen -t rsa -b 4096 -C "your_email@example.com"  # 其中，邮箱为 Github 对应的邮箱
   ```

   在执行命令时，它会依次询问：

   - 存储的路径（默认即可，即 `~\.ssh\id_rsa`，直接按 Enter）
   - 设置的密码（不需要设置，直接按 Enter）
   - 再次确认密码（继续按 Enter）

2. 使用以下命令查看并复制 SSH 私钥内容：

   ```shell
   cat ~/.ssh/id_rsa.pub  # macOS（Windows 用 type 命令）
   ```

3. 在 github 中点击头像，选择 Settings -> SSH and GPS keys -> New SSH Key，填写或选择：

   - Title：是指该密钥来自哪里
   - Key type: 选择 Authentication Key 即可
   - Key: 粘贴刚才复制的 SSH 密钥

4. 添加 SSH 密钥后，可以再次尝试 git push。首次 push 还会遇到类似于下面的错误：

   ```shell
   The authenticity of host 'github.com (140.82.112.3)' can't be established.
   ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.
   This key is not known by any other names.
   Are you sure you want to continue connecting (yes/no)? 
   ```

   这是因为 GitHub 的 SSH 服务器公钥还没有被记录在本地机器上，输入 yes 后，它会把 GitHub 的公钥添加到的 ~/.ssh/known_hosts 文件中。







# 创建本地仓库并提交至远程仓库中

步骤如下：

1. 首先在 github 端创建一个远程仓库，例如名为 `cloudDrive` 

2. 在本地创建一个工作空间文件夹，在当前路径终端下，使用 `git init` 命令初始化一个本地仓库（此时，该工作空间文件夹下会创建一个 .git 文件夹并隐藏）。

   ```shell
   git init
   ```

3. 在工作空间中放入要上传的文件，还要配置 .gitignore 文件，用于过滤不应被添加到文件。可能的被过滤的文件如下：

   ```shell
   .DS_Store  # 苹果文件夹中的隐藏文件，用于访达中展示样式的文件
   ```

4. 对本地仓库中的内容进行添加、修改和移除等操作（在暂存区中）。示例命令如下：

   ```shell
   git add ./filename          # 添加或更新某个文件夹或文件
   git rm --cached ./filename  # 移除某个文件夹或文件，不影响本地文件
   ```

5. 然后将暂存区的改动提交至本地仓库中：

   ```shell
   git commit -m "first commit"
   ```

   其中 "first commit"，是本次改动的说明。

6. 将当前默认的 "master" 分支重新命名为 "main"，向本地仓库添加远程地址，并将 "main" 分支内容上传至远程仓库中：

   ```shell
   git branch -M main
   git remote add origin git@github.com:MuAnnan/cloudDrive.git
   git push -u origin main
   ```

   其中 `-u` 是 `--set-upstream` 的简写，其作用是：

   将当前本地分支（main）与远程分支（origin/main）建立追踪关系，之后只需要输入 `git push` 或者 `git pull`，git 就会知道默认是推送或拉取到 origin/main。







# 更改本地仓库的远程仓库地址

使用以下命令可以查看当前远程地址：

```shell
git remote -v
```

使用以下命令修改远程仓库：

```shell
git remote set-url origin 新的远程地址
```







# 将远程仓库中的改动覆盖本地文件

```shell
git fetch origin
git reset --hard origin/main
```







# 同步问题

要事先与远程仓库保持一致，不然这里有改动，远程仓库也有改动，就乱了。

要先 `git pull origin main`，然后再使用 git add . 去修改